<!DOCTYPE html>
<html lang="en"><head>
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5XGC2TR');</script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/2015-01-29-city-of-capetown-tenders/style.css">
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5XGC2TR"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <center>
      <div id="view_selection" class="btn-group">
        <a id="all" class="btn">All Tenders</a>
        <a id="year" class="btn active">By Department</a>
      </div>
      <div id="vis"></div>
    </center>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.9.1.min.js"><\/script>')</script>
    <script src="/js/2015-01-29-city-of-capetown-tenders/CustomTooltip.js"></script>
    <script src="/js/d3.v3.min.js"></script>
    <script src="/js/2015-01-29-city-of-capetown-tenders/vis.js"></script>
    <script type="text/javascript">

    d3.csv("/data/tenders/tenders.csv", function(csv) {
      chart = new BubbleChart(csv);
      chart.start();
      chart.display_by_department();

      d3.selectAll("#view_selection a")
        .on("click", function() {
            var me = d3.select(this);
            var view_type = me.attr("id");
            chart.toggle_view(view_type);
            d3.selectAll("#view_selection a").each(function() {
              var me = d3.select(this);
              if (me.classed("active")) {
                me.classed("active", false)  
              } else {
                me.classed("active", true)  
              }
            })
        });
    });
    </script>
  </body>
</html>
